{"cells":[{"source":"<a href=\"https://www.kaggle.com/code/min02yam/data-preprocessing-on-diamonds-dataset-using-r?scriptVersionId=93735209\" target=\"_blank\"><img align=\"left\" alt=\"Kaggle\" title=\"Open in Kaggle\" src=\"https://kaggle.com/static/images/open-in-kaggle.svg\"></a>","metadata":{},"cell_type":"markdown","outputs":[],"execution_count":0},{"cell_type":"markdown","id":"07afd38b","metadata":{"papermill":{"duration":0.007811,"end_time":"2022-04-22T16:31:26.784416","exception":false,"start_time":"2022-04-22T16:31:26.776605","status":"completed"},"tags":[]},"source":["## 2. Preprocessing"]},{"cell_type":"code","execution_count":1,"id":"1cfd1cf2","metadata":{"execution":{"iopub.execute_input":"2022-04-22T16:31:26.802624Z","iopub.status.busy":"2022-04-22T16:31:26.799995Z","iopub.status.idle":"2022-04-22T16:31:27.150719Z","shell.execute_reply":"2022-04-22T16:31:27.148724Z"},"papermill":{"duration":0.362737,"end_time":"2022-04-22T16:31:27.153857","exception":false,"start_time":"2022-04-22T16:31:26.79112","status":"completed"},"tags":[]},"outputs":[],"source":["df<-read.csv(\"../input/r-detailed-eda-on-diamonds-dataset/df.csv\")"]},{"cell_type":"code","execution_count":2,"id":"bac18f5d","metadata":{"execution":{"iopub.execute_input":"2022-04-22T16:31:27.20602Z","iopub.status.busy":"2022-04-22T16:31:27.169018Z","iopub.status.idle":"2022-04-22T16:31:27.23548Z","shell.execute_reply":"2022-04-22T16:31:27.233229Z"},"papermill":{"duration":0.077527,"end_time":"2022-04-22T16:31:27.238086","exception":false,"start_time":"2022-04-22T16:31:27.160559","status":"completed"},"tags":[]},"outputs":[{"data":{"text/html":["<style>\n",".list-inline {list-style: none; margin:0; padding: 0}\n",".list-inline>li {display: inline-block}\n",".list-inline>li:not(:last-child)::after {content: \"\\00b7\"; padding: 0 .5ex}\n","</style>\n","<ol class=list-inline><li>'auth'</li><li>'df'</li><li>'get_user_secret'</li><li>'GET_USER_SECRET_ENDPOINT'</li><li>'KAGGLE_BASE_URL'</li><li>'KAGGLE_IAP_TOKEN'</li><li>'KAGGLE_USER_SECRETS_TOKEN'</li><li>'TokenBigQueryKernel'</li></ol>\n"],"text/latex":["\\begin{enumerate*}\n","\\item 'auth'\n","\\item 'df'\n","\\item 'get\\_user\\_secret'\n","\\item 'GET\\_USER\\_SECRET\\_ENDPOINT'\n","\\item 'KAGGLE\\_BASE\\_URL'\n","\\item 'KAGGLE\\_IAP\\_TOKEN'\n","\\item 'KAGGLE\\_USER\\_SECRETS\\_TOKEN'\n","\\item 'TokenBigQueryKernel'\n","\\end{enumerate*}\n"],"text/markdown":["1. 'auth'\n","2. 'df'\n","3. 'get_user_secret'\n","4. 'GET_USER_SECRET_ENDPOINT'\n","5. 'KAGGLE_BASE_URL'\n","6. 'KAGGLE_IAP_TOKEN'\n","7. 'KAGGLE_USER_SECRETS_TOKEN'\n","8. 'TokenBigQueryKernel'\n","\n","\n"],"text/plain":["[1] \"auth\"                      \"df\"                       \n","[3] \"get_user_secret\"           \"GET_USER_SECRET_ENDPOINT\" \n","[5] \"KAGGLE_BASE_URL\"           \"KAGGLE_IAP_TOKEN\"         \n","[7] \"KAGGLE_USER_SECRETS_TOKEN\" \"TokenBigQueryKernel\"      "]},"metadata":{},"output_type":"display_data"}],"source":["ls()"]},{"cell_type":"markdown","id":"def2f0c8","metadata":{"papermill":{"duration":0.006737,"end_time":"2022-04-22T16:31:27.251725","exception":false,"start_time":"2022-04-22T16:31:27.244988","status":"completed"},"tags":[]},"source":["###  2.1 Label Encoding : Converting Strings into Numbers"]},{"cell_type":"code","execution_count":3,"id":"d033aa2b","metadata":{"execution":{"iopub.execute_input":"2022-04-22T16:31:27.270902Z","iopub.status.busy":"2022-04-22T16:31:27.268972Z","iopub.status.idle":"2022-04-22T16:31:27.423748Z","shell.execute_reply":"2022-04-22T16:31:27.421119Z"},"papermill":{"duration":0.168168,"end_time":"2022-04-22T16:31:27.426543","exception":false,"start_time":"2022-04-22T16:31:27.258375","status":"completed"},"tags":[]},"outputs":[],"source":["library(R6)\n","library(superml) # Lebel Encoder"]},{"cell_type":"code","execution_count":4,"id":"4d8f7898","metadata":{"execution":{"iopub.execute_input":"2022-04-22T16:31:27.443077Z","iopub.status.busy":"2022-04-22T16:31:27.44155Z","iopub.status.idle":"2022-04-22T16:31:27.487526Z","shell.execute_reply":"2022-04-22T16:31:27.485527Z"},"papermill":{"duration":0.056722,"end_time":"2022-04-22T16:31:27.489949","exception":false,"start_time":"2022-04-22T16:31:27.433227","status":"completed"},"tags":[]},"outputs":[{"data":{"text/plain":["\n","     Fair      Good     Ideal   Premium Very Good \n","     1610      4906     21551     13791     12082 "]},"metadata":{},"output_type":"display_data"},{"data":{"text/plain":["\n","    D     E     F     G     H     I     J \n"," 6775  9797  9542 11292  8304  5422  2808 "]},"metadata":{},"output_type":"display_data"},{"data":{"text/plain":["\n","   I1    IF   SI1   SI2   VS1   VS2  VVS1  VVS2 \n","  741  1790 13065  9194  8171 12258  3655  5066 "]},"metadata":{},"output_type":"display_data"}],"source":["table(df$cut)\n","table(df$color)\n","table(df$clarity)\n"]},{"cell_type":"code","execution_count":5,"id":"fe27b55f","metadata":{"execution":{"iopub.execute_input":"2022-04-22T16:31:27.508373Z","iopub.status.busy":"2022-04-22T16:31:27.506512Z","iopub.status.idle":"2022-04-22T16:31:27.531804Z","shell.execute_reply":"2022-04-22T16:31:27.5288Z"},"papermill":{"duration":0.036964,"end_time":"2022-04-22T16:31:27.534419","exception":false,"start_time":"2022-04-22T16:31:27.497455","status":"completed"},"tags":[]},"outputs":[],"source":["lbl = LabelEncoder$new()"]},{"cell_type":"code","execution_count":6,"id":"652781db","metadata":{"execution":{"iopub.execute_input":"2022-04-22T16:31:27.551873Z","iopub.status.busy":"2022-04-22T16:31:27.550119Z","iopub.status.idle":"2022-04-22T16:31:27.828761Z","shell.execute_reply":"2022-04-22T16:31:27.826516Z"},"papermill":{"duration":0.290121,"end_time":"2022-04-22T16:31:27.831597","exception":false,"start_time":"2022-04-22T16:31:27.541476","status":"completed"},"tags":[]},"outputs":[{"data":{"text/html":["<table class=\"dataframe\">\n","<caption>A data.frame: 6 × 10</caption>\n","<thead>\n","\t<tr><th></th><th scope=col>carat</th><th scope=col>cut</th><th scope=col>color</th><th scope=col>clarity</th><th scope=col>totdep</th><th scope=col>table</th><th scope=col>price</th><th scope=col>length</th><th scope=col>width</th><th scope=col>depth</th></tr>\n","\t<tr><th></th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>\n","</thead>\n","<tbody>\n","\t<tr><th scope=row>1</th><td>0.23</td><td>0</td><td>0</td><td>0</td><td>61.5</td><td>55</td><td>326</td><td>3.95</td><td>3.98</td><td>2.43</td></tr>\n","\t<tr><th scope=row>2</th><td>0.21</td><td>1</td><td>0</td><td>1</td><td>59.8</td><td>61</td><td>326</td><td>3.89</td><td>3.84</td><td>2.31</td></tr>\n","\t<tr><th scope=row>3</th><td>0.23</td><td>2</td><td>0</td><td>2</td><td>56.9</td><td>65</td><td>327</td><td>4.05</td><td>4.07</td><td>2.31</td></tr>\n","\t<tr><th scope=row>4</th><td>0.29</td><td>1</td><td>1</td><td>3</td><td>62.4</td><td>58</td><td>334</td><td>4.20</td><td>4.23</td><td>2.63</td></tr>\n","\t<tr><th scope=row>5</th><td>0.31</td><td>2</td><td>2</td><td>0</td><td>63.3</td><td>58</td><td>335</td><td>4.34</td><td>4.35</td><td>2.75</td></tr>\n","\t<tr><th scope=row>6</th><td>0.24</td><td>3</td><td>2</td><td>4</td><td>62.8</td><td>57</td><td>336</td><td>3.94</td><td>3.96</td><td>2.48</td></tr>\n","</tbody>\n","</table>\n"],"text/latex":["A data.frame: 6 × 10\n","\\begin{tabular}{r|llllllllll}\n","  & carat & cut & color & clarity & totdep & table & price & length & width & depth\\\\\n","  & <dbl> & <dbl> & <dbl> & <dbl> & <dbl> & <dbl> & <int> & <dbl> & <dbl> & <dbl>\\\\\n","\\hline\n","\t1 & 0.23 & 0 & 0 & 0 & 61.5 & 55 & 326 & 3.95 & 3.98 & 2.43\\\\\n","\t2 & 0.21 & 1 & 0 & 1 & 59.8 & 61 & 326 & 3.89 & 3.84 & 2.31\\\\\n","\t3 & 0.23 & 2 & 0 & 2 & 56.9 & 65 & 327 & 4.05 & 4.07 & 2.31\\\\\n","\t4 & 0.29 & 1 & 1 & 3 & 62.4 & 58 & 334 & 4.20 & 4.23 & 2.63\\\\\n","\t5 & 0.31 & 2 & 2 & 0 & 63.3 & 58 & 335 & 4.34 & 4.35 & 2.75\\\\\n","\t6 & 0.24 & 3 & 2 & 4 & 62.8 & 57 & 336 & 3.94 & 3.96 & 2.48\\\\\n","\\end{tabular}\n"],"text/markdown":["\n","A data.frame: 6 × 10\n","\n","| <!--/--> | carat &lt;dbl&gt; | cut &lt;dbl&gt; | color &lt;dbl&gt; | clarity &lt;dbl&gt; | totdep &lt;dbl&gt; | table &lt;dbl&gt; | price &lt;int&gt; | length &lt;dbl&gt; | width &lt;dbl&gt; | depth &lt;dbl&gt; |\n","|---|---|---|---|---|---|---|---|---|---|---|\n","| 1 | 0.23 | 0 | 0 | 0 | 61.5 | 55 | 326 | 3.95 | 3.98 | 2.43 |\n","| 2 | 0.21 | 1 | 0 | 1 | 59.8 | 61 | 326 | 3.89 | 3.84 | 2.31 |\n","| 3 | 0.23 | 2 | 0 | 2 | 56.9 | 65 | 327 | 4.05 | 4.07 | 2.31 |\n","| 4 | 0.29 | 1 | 1 | 3 | 62.4 | 58 | 334 | 4.20 | 4.23 | 2.63 |\n","| 5 | 0.31 | 2 | 2 | 0 | 63.3 | 58 | 335 | 4.34 | 4.35 | 2.75 |\n","| 6 | 0.24 | 3 | 2 | 4 | 62.8 | 57 | 336 | 3.94 | 3.96 | 2.48 |\n","\n"],"text/plain":["  carat cut color clarity totdep table price length width depth\n","1 0.23  0   0     0       61.5   55    326   3.95   3.98  2.43 \n","2 0.21  1   0     1       59.8   61    326   3.89   3.84  2.31 \n","3 0.23  2   0     2       56.9   65    327   4.05   4.07  2.31 \n","4 0.29  1   1     3       62.4   58    334   4.20   4.23  2.63 \n","5 0.31  2   2     0       63.3   58    335   4.34   4.35  2.75 \n","6 0.24  3   2     4       62.8   57    336   3.94   3.96  2.48 "]},"metadata":{},"output_type":"display_data"}],"source":["df[,2] = lbl$fit_transform(df[,2])\n","df[,3] = lbl$fit_transform(df[,3])\n","df[,4] = lbl$fit_transform(df[,4])\n","head(df)"]},{"cell_type":"markdown","id":"61552dfc","metadata":{"papermill":{"duration":0.007247,"end_time":"2022-04-22T16:31:27.846102","exception":false,"start_time":"2022-04-22T16:31:27.838855","status":"completed"},"tags":[]},"source":["### Scaling"]},{"cell_type":"code","execution_count":7,"id":"e4d0bb1f","metadata":{"execution":{"iopub.execute_input":"2022-04-22T16:31:27.864741Z","iopub.status.busy":"2022-04-22T16:31:27.86303Z","iopub.status.idle":"2022-04-22T16:31:27.925581Z","shell.execute_reply":"2022-04-22T16:31:27.92362Z"},"papermill":{"duration":0.074742,"end_time":"2022-04-22T16:31:27.928145","exception":false,"start_time":"2022-04-22T16:31:27.853403","status":"completed"},"tags":[]},"outputs":[],"source":["df.scl<-data.frame(scale(df[,-7]))"]},{"cell_type":"code","execution_count":8,"id":"2094fd1f","metadata":{"execution":{"iopub.execute_input":"2022-04-22T16:31:27.946707Z","iopub.status.busy":"2022-04-22T16:31:27.945104Z","iopub.status.idle":"2022-04-22T16:31:27.958098Z","shell.execute_reply":"2022-04-22T16:31:27.956395Z"},"papermill":{"duration":0.024466,"end_time":"2022-04-22T16:31:27.960397","exception":false,"start_time":"2022-04-22T16:31:27.935931","status":"completed"},"tags":[]},"outputs":[],"source":["df.scl$price<-df$price #타겟 포함"]},{"cell_type":"code","execution_count":9,"id":"6eda8f12","metadata":{"execution":{"iopub.execute_input":"2022-04-22T16:31:27.979439Z","iopub.status.busy":"2022-04-22T16:31:27.977673Z","iopub.status.idle":"2022-04-22T16:31:28.004892Z","shell.execute_reply":"2022-04-22T16:31:28.002812Z"},"papermill":{"duration":0.040111,"end_time":"2022-04-22T16:31:28.007983","exception":false,"start_time":"2022-04-22T16:31:27.967872","status":"completed"},"tags":[]},"outputs":[{"name":"stdout","output_type":"stream","text":["'data.frame':\t53940 obs. of  10 variables:\n"," $ carat  : num  -1.2 -1.24 -1.2 -1.07 -1.03 ...\n"," $ cut    : num  -0.971 -0.181 0.609 -0.181 0.609 ...\n"," $ color  : num  -1.548 -1.548 -1.548 -1.061 -0.573 ...\n"," $ clarity: num  -1.277 -0.711 -0.145 0.421 -1.277 ...\n"," $ totdep : num  -0.174 -1.361 -3.385 0.454 1.082 ...\n"," $ table  : num  -1.1 1.586 3.376 0.243 0.243 ...\n"," $ length : num  -1.59 -1.64 -1.5 -1.36 -1.24 ...\n"," $ width  : num  -1.54 -1.66 -1.46 -1.32 -1.21 ...\n"," $ depth  : num  -1.57 -1.74 -1.74 -1.29 -1.12 ...\n"," $ price  : int  326 326 327 334 335 336 336 337 337 338 ...\n"]}],"source":["str(df.scl)"]},{"cell_type":"markdown","id":"50367b9a","metadata":{"papermill":{"duration":0.007824,"end_time":"2022-04-22T16:31:28.024416","exception":false,"start_time":"2022-04-22T16:31:28.016592","status":"completed"},"tags":[]},"source":["### PCA\n","- At the previous EDA, `length(8)`, `width(9)`, `depth(10)` All three vars were highly correlated."]},{"cell_type":"code","execution_count":10,"id":"31cffbf2","metadata":{"execution":{"iopub.execute_input":"2022-04-22T16:31:28.043145Z","iopub.status.busy":"2022-04-22T16:31:28.04167Z","iopub.status.idle":"2022-04-22T16:31:28.226675Z","shell.execute_reply":"2022-04-22T16:31:28.224908Z"},"papermill":{"duration":0.19711,"end_time":"2022-04-22T16:31:28.229269","exception":false,"start_time":"2022-04-22T16:31:28.032159","status":"completed"},"tags":[]},"outputs":[],"source":["library(psych)"]},{"cell_type":"code","execution_count":11,"id":"43aaef08","metadata":{"execution":{"iopub.execute_input":"2022-04-22T16:31:28.248551Z","iopub.status.busy":"2022-04-22T16:31:28.247014Z","iopub.status.idle":"2022-04-22T16:31:28.475892Z","shell.execute_reply":"2022-04-22T16:31:28.474263Z"},"papermill":{"duration":0.241142,"end_time":"2022-04-22T16:31:28.478148","exception":false,"start_time":"2022-04-22T16:31:28.237006","status":"completed"},"scrolled":true,"tags":[]},"outputs":[{"data":{"text/plain":["Principal Components Analysis\n","Call: principal(r = df.scl[, 7:9], nfactors = 3, rotate = \"varimax\")\n","Standardized loadings (pattern matrix) based upon correlation matrix\n","        RC2  RC3  RC1 h2      u2 com\n","length 0.60 0.61 0.52  1 1.1e-16 3.0\n","width  0.55 0.76 0.36  1 3.3e-16 2.3\n","depth  0.76 0.53 0.36  1 2.2e-16 2.3\n","\n","                       RC2  RC3  RC1\n","SS loadings           1.24 1.22 0.54\n","Proportion Var        0.41 0.41 0.18\n","Cumulative Var        0.41 0.82 1.00\n","Proportion Explained  0.41 0.41 0.18\n","Cumulative Proportion 0.41 0.82 1.00\n","\n","Mean item complexity =  2.5\n","Test of the hypothesis that 3 components are sufficient.\n","\n","The root mean square of the residuals (RMSR) is  0 \n"," with the empirical chi square  0  with prob <  NA \n","\n","Fit based upon off diagonal values = 1"]},"metadata":{},"output_type":"display_data"}],"source":["pca<-principal(df.scl[,7:9], nfactors=3,rotate=\"varimax\"); pca"]},{"cell_type":"markdown","id":"6ae01a53","metadata":{"papermill":{"duration":0.008299,"end_time":"2022-04-22T16:31:28.494347","exception":false,"start_time":"2022-04-22T16:31:28.486048","status":"completed"},"tags":[]},"source":["- Use only RC2 + RC3 (Becuase Cumulative Var is 0.82 )"]},{"cell_type":"code","execution_count":12,"id":"44d6b9d9","metadata":{"execution":{"iopub.execute_input":"2022-04-22T16:31:28.514696Z","iopub.status.busy":"2022-04-22T16:31:28.513197Z","iopub.status.idle":"2022-04-22T16:31:28.536566Z","shell.execute_reply":"2022-04-22T16:31:28.534777Z"},"papermill":{"duration":0.036069,"end_time":"2022-04-22T16:31:28.538896","exception":false,"start_time":"2022-04-22T16:31:28.502827","status":"completed"},"tags":[]},"outputs":[{"data":{"text/html":["<table class=\"dataframe\">\n","<caption>A data.frame: 6 × 2</caption>\n","<thead>\n","\t<tr><th></th><th scope=col>RC2</th><th scope=col>RC3</th></tr>\n","\t<tr><th></th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>\n","</thead>\n","<tbody>\n","\t<tr><th scope=row>1</th><td>-1.0593010</td><td>-0.8860740</td></tr>\n","\t<tr><th scope=row>2</th><td>-1.4009072</td><td>-1.0073271</td></tr>\n","\t<tr><th scope=row>3</th><td>-1.8408313</td><td>-0.5281591</td></tr>\n","\t<tr><th scope=row>4</th><td>-0.7074556</td><td>-0.8317483</td></tr>\n","\t<tr><th scope=row>5</th><td>-0.4535444</td><td>-0.8759844</td></tr>\n","\t<tr><th scope=row>6</th><td>-0.7932781</td><td>-1.0244476</td></tr>\n","</tbody>\n","</table>\n"],"text/latex":["A data.frame: 6 × 2\n","\\begin{tabular}{r|ll}\n","  & RC2 & RC3\\\\\n","  & <dbl> & <dbl>\\\\\n","\\hline\n","\t1 & -1.0593010 & -0.8860740\\\\\n","\t2 & -1.4009072 & -1.0073271\\\\\n","\t3 & -1.8408313 & -0.5281591\\\\\n","\t4 & -0.7074556 & -0.8317483\\\\\n","\t5 & -0.4535444 & -0.8759844\\\\\n","\t6 & -0.7932781 & -1.0244476\\\\\n","\\end{tabular}\n"],"text/markdown":["\n","A data.frame: 6 × 2\n","\n","| <!--/--> | RC2 &lt;dbl&gt; | RC3 &lt;dbl&gt; |\n","|---|---|---|\n","| 1 | -1.0593010 | -0.8860740 |\n","| 2 | -1.4009072 | -1.0073271 |\n","| 3 | -1.8408313 | -0.5281591 |\n","| 4 | -0.7074556 | -0.8317483 |\n","| 5 | -0.4535444 | -0.8759844 |\n","| 6 | -0.7932781 | -1.0244476 |\n","\n"],"text/plain":["  RC2        RC3       \n","1 -1.0593010 -0.8860740\n","2 -1.4009072 -1.0073271\n","3 -1.8408313 -0.5281591\n","4 -0.7074556 -0.8317483\n","5 -0.4535444 -0.8759844\n","6 -0.7932781 -1.0244476"]},"metadata":{},"output_type":"display_data"}],"source":["pca.scr<-data.frame(pca$scores[,1:2]) ; head(pca.scr)"]},{"cell_type":"code","execution_count":13,"id":"14b71bb2","metadata":{"execution":{"iopub.execute_input":"2022-04-22T16:31:28.559123Z","iopub.status.busy":"2022-04-22T16:31:28.557523Z","iopub.status.idle":"2022-04-22T16:31:28.57358Z","shell.execute_reply":"2022-04-22T16:31:28.571508Z"},"papermill":{"duration":0.028776,"end_time":"2022-04-22T16:31:28.576205","exception":false,"start_time":"2022-04-22T16:31:28.547429","status":"completed"},"tags":[]},"outputs":[],"source":["#  Remove the col before.\n","df.scl<-df.scl[,-c(7:10)]   "]},{"cell_type":"code","execution_count":14,"id":"2aed3597","metadata":{"execution":{"iopub.execute_input":"2022-04-22T16:31:28.595985Z","iopub.status.busy":"2022-04-22T16:31:28.594106Z","iopub.status.idle":"2022-04-22T16:31:28.610887Z","shell.execute_reply":"2022-04-22T16:31:28.608746Z"},"papermill":{"duration":0.029024,"end_time":"2022-04-22T16:31:28.613278","exception":false,"start_time":"2022-04-22T16:31:28.584254","status":"completed"},"tags":[]},"outputs":[],"source":["# Bind the col about pca scores.\n","df.pca<-cbind(df.scl,pca.scr)"]},{"cell_type":"code","execution_count":15,"id":"2c2dd720","metadata":{"execution":{"iopub.execute_input":"2022-04-22T16:31:28.632779Z","iopub.status.busy":"2022-04-22T16:31:28.630787Z","iopub.status.idle":"2022-04-22T16:31:28.649048Z","shell.execute_reply":"2022-04-22T16:31:28.646381Z"},"papermill":{"duration":0.030835,"end_time":"2022-04-22T16:31:28.651838","exception":false,"start_time":"2022-04-22T16:31:28.621003","status":"completed"},"tags":[]},"outputs":[],"source":["# Add a target\n","df.pca$price<- df$price"]},{"cell_type":"code","execution_count":16,"id":"32404cf8","metadata":{"execution":{"iopub.execute_input":"2022-04-22T16:31:28.671372Z","iopub.status.busy":"2022-04-22T16:31:28.669341Z","iopub.status.idle":"2022-04-22T16:31:28.700351Z","shell.execute_reply":"2022-04-22T16:31:28.698236Z"},"papermill":{"duration":0.043232,"end_time":"2022-04-22T16:31:28.702833","exception":false,"start_time":"2022-04-22T16:31:28.659601","status":"completed"},"tags":[]},"outputs":[{"data":{"text/html":["<table class=\"dataframe\">\n","<caption>A data.frame: 6 × 9</caption>\n","<thead>\n","\t<tr><th></th><th scope=col>carat</th><th scope=col>cut</th><th scope=col>color</th><th scope=col>clarity</th><th scope=col>totdep</th><th scope=col>table</th><th scope=col>RC2</th><th scope=col>RC3</th><th scope=col>price</th></tr>\n","\t<tr><th></th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;int&gt;</th></tr>\n","</thead>\n","<tbody>\n","\t<tr><th scope=row>1</th><td>-1.198157</td><td>-0.9707445</td><td>-1.5483780</td><td>-1.2771509</td><td>-0.1740899</td><td>-1.0996618</td><td>-1.0593010</td><td>-0.8860740</td><td>326</td></tr>\n","\t<tr><th scope=row>2</th><td>-1.240350</td><td>-0.1808403</td><td>-1.5483780</td><td>-0.7110721</td><td>-1.3607259</td><td> 1.5855140</td><td>-1.4009072</td><td>-1.0073271</td><td>326</td></tr>\n","\t<tr><th scope=row>3</th><td>-1.198157</td><td> 0.6090639</td><td>-1.5483780</td><td>-0.1449934</td><td>-3.3849872</td><td> 3.3756312</td><td>-1.8408313</td><td>-0.5281591</td><td>327</td></tr>\n","\t<tr><th scope=row>4</th><td>-1.071577</td><td>-0.1808403</td><td>-1.0606102</td><td> 0.4210853</td><td> 0.4541292</td><td> 0.2429261</td><td>-0.7074556</td><td>-0.8317483</td><td>334</td></tr>\n","\t<tr><th scope=row>5</th><td>-1.029384</td><td> 0.6090639</td><td>-0.5728423</td><td>-1.2771509</td><td> 1.0823482</td><td> 0.2429261</td><td>-0.4535444</td><td>-0.8759844</td><td>335</td></tr>\n","\t<tr><th scope=row>6</th><td>-1.177060</td><td> 1.3989680</td><td>-0.5728423</td><td> 0.9871641</td><td> 0.7333376</td><td>-0.2046032</td><td>-0.7932781</td><td>-1.0244476</td><td>336</td></tr>\n","</tbody>\n","</table>\n"],"text/latex":["A data.frame: 6 × 9\n","\\begin{tabular}{r|lllllllll}\n","  & carat & cut & color & clarity & totdep & table & RC2 & RC3 & price\\\\\n","  & <dbl> & <dbl> & <dbl> & <dbl> & <dbl> & <dbl> & <dbl> & <dbl> & <int>\\\\\n","\\hline\n","\t1 & -1.198157 & -0.9707445 & -1.5483780 & -1.2771509 & -0.1740899 & -1.0996618 & -1.0593010 & -0.8860740 & 326\\\\\n","\t2 & -1.240350 & -0.1808403 & -1.5483780 & -0.7110721 & -1.3607259 &  1.5855140 & -1.4009072 & -1.0073271 & 326\\\\\n","\t3 & -1.198157 &  0.6090639 & -1.5483780 & -0.1449934 & -3.3849872 &  3.3756312 & -1.8408313 & -0.5281591 & 327\\\\\n","\t4 & -1.071577 & -0.1808403 & -1.0606102 &  0.4210853 &  0.4541292 &  0.2429261 & -0.7074556 & -0.8317483 & 334\\\\\n","\t5 & -1.029384 &  0.6090639 & -0.5728423 & -1.2771509 &  1.0823482 &  0.2429261 & -0.4535444 & -0.8759844 & 335\\\\\n","\t6 & -1.177060 &  1.3989680 & -0.5728423 &  0.9871641 &  0.7333376 & -0.2046032 & -0.7932781 & -1.0244476 & 336\\\\\n","\\end{tabular}\n"],"text/markdown":["\n","A data.frame: 6 × 9\n","\n","| <!--/--> | carat &lt;dbl&gt; | cut &lt;dbl&gt; | color &lt;dbl&gt; | clarity &lt;dbl&gt; | totdep &lt;dbl&gt; | table &lt;dbl&gt; | RC2 &lt;dbl&gt; | RC3 &lt;dbl&gt; | price &lt;int&gt; |\n","|---|---|---|---|---|---|---|---|---|---|\n","| 1 | -1.198157 | -0.9707445 | -1.5483780 | -1.2771509 | -0.1740899 | -1.0996618 | -1.0593010 | -0.8860740 | 326 |\n","| 2 | -1.240350 | -0.1808403 | -1.5483780 | -0.7110721 | -1.3607259 |  1.5855140 | -1.4009072 | -1.0073271 | 326 |\n","| 3 | -1.198157 |  0.6090639 | -1.5483780 | -0.1449934 | -3.3849872 |  3.3756312 | -1.8408313 | -0.5281591 | 327 |\n","| 4 | -1.071577 | -0.1808403 | -1.0606102 |  0.4210853 |  0.4541292 |  0.2429261 | -0.7074556 | -0.8317483 | 334 |\n","| 5 | -1.029384 |  0.6090639 | -0.5728423 | -1.2771509 |  1.0823482 |  0.2429261 | -0.4535444 | -0.8759844 | 335 |\n","| 6 | -1.177060 |  1.3989680 | -0.5728423 |  0.9871641 |  0.7333376 | -0.2046032 | -0.7932781 | -1.0244476 | 336 |\n","\n"],"text/plain":["  carat     cut        color      clarity    totdep     table      RC2       \n","1 -1.198157 -0.9707445 -1.5483780 -1.2771509 -0.1740899 -1.0996618 -1.0593010\n","2 -1.240350 -0.1808403 -1.5483780 -0.7110721 -1.3607259  1.5855140 -1.4009072\n","3 -1.198157  0.6090639 -1.5483780 -0.1449934 -3.3849872  3.3756312 -1.8408313\n","4 -1.071577 -0.1808403 -1.0606102  0.4210853  0.4541292  0.2429261 -0.7074556\n","5 -1.029384  0.6090639 -0.5728423 -1.2771509  1.0823482  0.2429261 -0.4535444\n","6 -1.177060  1.3989680 -0.5728423  0.9871641  0.7333376 -0.2046032 -0.7932781\n","  RC3        price\n","1 -0.8860740 326  \n","2 -1.0073271 326  \n","3 -0.5281591 327  \n","4 -0.8317483 334  \n","5 -0.8759844 335  \n","6 -1.0244476 336  "]},"metadata":{},"output_type":"display_data"}],"source":["head(df.pca) "]},{"cell_type":"markdown","id":"ff8c62f0","metadata":{"papermill":{"duration":0.008137,"end_time":"2022-04-22T16:31:28.719051","exception":false,"start_time":"2022-04-22T16:31:28.710914","status":"completed"},"tags":[]},"source":["### Splitting the Dataset"]},{"cell_type":"code","execution_count":17,"id":"03cf5e85","metadata":{"execution":{"iopub.execute_input":"2022-04-22T16:31:28.739042Z","iopub.status.busy":"2022-04-22T16:31:28.737077Z","iopub.status.idle":"2022-04-22T16:31:28.7559Z","shell.execute_reply":"2022-04-22T16:31:28.753089Z"},"papermill":{"duration":0.032246,"end_time":"2022-04-22T16:31:28.759247","exception":false,"start_time":"2022-04-22T16:31:28.727001","status":"completed"},"tags":[]},"outputs":[],"source":["set.seed(2022)"]},{"cell_type":"code","execution_count":18,"id":"5ddd3005","metadata":{"execution":{"iopub.execute_input":"2022-04-22T16:31:28.781049Z","iopub.status.busy":"2022-04-22T16:31:28.77912Z","iopub.status.idle":"2022-04-22T16:31:28.795937Z","shell.execute_reply":"2022-04-22T16:31:28.793941Z"},"papermill":{"duration":0.031255,"end_time":"2022-04-22T16:31:28.799486","exception":false,"start_time":"2022-04-22T16:31:28.768231","status":"completed"},"tags":[]},"outputs":[],"source":["idx<-sample(2, nrow(df.pca), replace=TRUE, prob=c(0.7,0.3))"]},{"cell_type":"code","execution_count":19,"id":"a5d9ef5f","metadata":{"execution":{"iopub.execute_input":"2022-04-22T16:31:28.82009Z","iopub.status.busy":"2022-04-22T16:31:28.818233Z","iopub.status.idle":"2022-04-22T16:31:28.854818Z","shell.execute_reply":"2022-04-22T16:31:28.852228Z"},"papermill":{"duration":0.049712,"end_time":"2022-04-22T16:31:28.857667","exception":false,"start_time":"2022-04-22T16:31:28.807955","status":"completed"},"tags":[]},"outputs":[],"source":["train<-df.pca[idx==1,]\n","test<-df.pca[idx==2,]"]},{"cell_type":"code","execution_count":20,"id":"ba5ea2c4","metadata":{"execution":{"iopub.execute_input":"2022-04-22T16:31:28.878429Z","iopub.status.busy":"2022-04-22T16:31:28.876592Z","iopub.status.idle":"2022-04-22T16:31:28.903013Z","shell.execute_reply":"2022-04-22T16:31:28.901045Z"},"papermill":{"duration":0.039944,"end_time":"2022-04-22T16:31:28.905981","exception":false,"start_time":"2022-04-22T16:31:28.866037","status":"completed"},"scrolled":true,"tags":[]},"outputs":[{"name":"stdout","output_type":"stream","text":["'data.frame':\t37696 obs. of  9 variables:\n"," $ carat  : num  -1.24 -1.2 -1.07 -1.03 -1.18 ...\n"," $ cut    : num  -0.181 0.609 -0.181 0.609 1.399 ...\n"," $ color  : num  -1.548 -1.548 -1.061 -0.573 -0.573 ...\n"," $ clarity: num  -0.711 -0.145 0.421 -1.277 0.987 ...\n"," $ totdep : num  -1.361 -3.385 0.454 1.082 0.733 ...\n"," $ table  : num  1.586 3.376 0.243 0.243 -0.205 ...\n"," $ RC2    : num  -1.401 -1.841 -0.707 -0.454 -0.793 ...\n"," $ RC3    : num  -1.007 -0.528 -0.832 -0.876 -1.024 ...\n"," $ price  : int  326 327 334 335 336 336 337 337 339 340 ...\n"]}],"source":["str(train)"]},{"cell_type":"code","execution_count":21,"id":"2b710a8e","metadata":{"execution":{"iopub.execute_input":"2022-04-22T16:31:28.926575Z","iopub.status.busy":"2022-04-22T16:31:28.924202Z","iopub.status.idle":"2022-04-22T16:31:28.950687Z","shell.execute_reply":"2022-04-22T16:31:28.948655Z"},"papermill":{"duration":0.040571,"end_time":"2022-04-22T16:31:28.954799","exception":false,"start_time":"2022-04-22T16:31:28.914228","status":"completed"},"tags":[]},"outputs":[{"name":"stdout","output_type":"stream","text":["'data.frame':\t16244 obs. of  9 variables:\n"," $ carat  : num  -1.2 -1.2 -1.05 -1.05 -1.05 ...\n"," $ cut    : num  -0.971 1.399 -0.971 1.399 0.609 ...\n"," $ color  : num  -1.5484 -0.0851 -1.0606 -0.5728 -1.0606 ...\n"," $ clarity: num  -1.277 -0.145 -1.277 -0.711 -1.277 ...\n"," $ totdep : num  -0.174 -1.64 0.175 0.664 1.082 ...\n"," $ table  : num  -1.1 1.586 -1.547 0.69 -0.652 ...\n"," $ RC2    : num  -1.059 -1.381 -0.73 -0.62 -0.484 ...\n"," $ RC3    : num  -0.886 -0.669 -0.738 -0.78 -0.847 ...\n"," $ price  : int  326 338 348 351 351 354 357 357 402 403 ...\n"]}],"source":["str(test)"]}],"metadata":{"kernelspec":{"display_name":"R","language":"R","name":"ir"},"language_info":{"codemirror_mode":"r","file_extension":".r","mimetype":"text/x-r-source","name":"R","pygments_lexer":"r","version":"4.0.5"},"papermill":{"default_parameters":{},"duration":6.149551,"end_time":"2022-04-22T16:31:29.087511","environment_variables":{},"exception":null,"input_path":"__notebook__.ipynb","output_path":"__notebook__.ipynb","parameters":{},"start_time":"2022-04-22T16:31:22.93796","version":"2.3.4"},"toc":{"base_numbering":1,"nav_menu":{},"number_sections":true,"sideBar":true,"skip_h1_title":false,"title_cell":"Table of Contents","title_sidebar":"Contents","toc_cell":false,"toc_position":{},"toc_section_display":true,"toc_window_display":false}},"nbformat":4,"nbformat_minor":5}
